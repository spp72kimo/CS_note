<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>密碼產生器</title>
	<style>
		div {
			margin: 5px;
		}
		button {
			margin-left: 10px;
		}
		.display {
			background-color: rgba(240,240,86,0.7);
			margin: 1.5rem;
			/*padding: 1rem;*/
			font-size: 1.5rem;
			word-break: break-all;
			/*width: 70vw;*/
		}

		input[type=number] {
  			width: 30px;
		}
	</style>
</head>
<body>
	<h1>簡易密碼產生器</h1>
	<div class='container'>	
		<div><label><input 
			type="checkbox" 
			name="en" 
			data-value="abcdefghijklmnopqrstuvwxyz"
			>
		英文小寫
		</label></div>

		<div><label><input 
			type="checkbox" 
			name="en" 
			data-value="ABCDEFGHIJKLMNOPQRSTUVWXYZ"
			>
		英文大寫
		</label></div>

		<div><label><input type="checkbox" name="num" data-value="1234567890">數字</label></div>
		<div><label><input type="checkbox" name="sign" data-value="!@#$%^&*()">符號</label></div>
		<div><label>多少字元：<input type="number" name="len" min='1' max='20' value='6'></label></div>
		<button>產生</button>
	</div>
	<div class='display'>
	</div>
</body>

<script>
	document.querySelector('button').addEventListener('click',
		function(e) {
			let check = false;
			let available = "";
			let password = "";
			let elements = document.querySelectorAll("input[type=checkbox]");
			for(let i=0; i<elements.length; i++) {
				if(elements[i].checked) {
					check = true;
					available += elements[i].getAttribute('data-value');
				}
				if(elements[i].checked) {
					check = true;
				}
			}
			if (!check) {
				alert("請勾選！");
				return;
			}

			let n = document.querySelector("input[type=number]").value
			if(n==="") alert("請輸入密碼字元！");
			for(let i=0; i<n; i++) {
				let index = Math.floor(Math.random()*available.length);
				password += available[index];
			}


			document.querySelector('.display').innerText = password;
		}
	)
</script>
</html>